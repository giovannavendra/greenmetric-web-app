{"ast":null,"code":"import Axios from \"axios\";\nimport { createContext } from \"react\";\nimport { servAddr } from \"../utils/constants\";\nexport const defaultAppContext = {\n  loading: false,\n  metrics: [],\n  user: {\n    authenticated: false,\n    username: null,\n    password: null\n  }\n};\nexport const AppContext = /*#__PURE__*/createContext(defaultAppContext);\nexport const appReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOADING\":\n      return { ...state,\n        loading: action.value\n      };\n\n    case \"GET_METRICS\":\n      return { ...state,\n        metrics: action.value.map(el => {\n          el.oldData = el.data instanceof Object ? { ...el.data\n          } : el.data;\n          return el;\n        })\n      };\n\n    case \"SET_METRIC\":\n      return { ...state,\n        metrics: state.metrics.map(el => {\n          if (el.id === action.id) {\n            if (el === null || el === void 0 ? void 0 : el.data.hasOwnProperty(\"options\")) el.data.currentOption = action.value;else el.data = action.value;\n          }\n\n          return el;\n        })\n      };\n\n    case \"LOGOUT\":\n      return { ...state,\n        user: {\n          authenticated: false,\n          username: null,\n          password: null\n        }\n      };\n\n    case \"LOGIN\":\n      return { ...state,\n        user: {\n          authenticated: true,\n          username: action.username,\n          password: action.password\n        }\n      };\n\n    case \"FORM_LOGIN\":\n      return { ...state,\n        user: {\n          authenticated: true,\n          username: null,\n          password: null\n        }\n      };\n\n    default:\n      return state;\n  }\n};\nexport const dispatchLoading = loading => ({\n  type: \"LOADING\",\n  value: loading\n});\nexport const dispatchLogin = ({\n  username,\n  password\n}) => ({\n  username,\n  password,\n  type: \"LOGIN\"\n});\nexport const dispatchLogout = user => ({\n  type: \"LOGOUT\"\n});\nexport const dispatchFormLogin = () => ({\n  type: \"FORM_LOGIN\"\n});\nexport const dispatchStartGetMetrics = dispatch => {\n  Axios.get(`${servAddr}/metrics`).then(({\n    data\n  }) => {\n    dispatch(dispatchGetMetrics(data));\n  });\n};\n\nconst dispatchGetMetrics = metrics => ({\n  type: \"GET_METRICS\",\n  value: metrics\n});\n\nexport const dispatchSetMetric = (id, value) => ({\n  type: \"SET_METRIC\",\n  id,\n  value\n});","map":{"version":3,"sources":["/Users/giovanna/Documents/MC855/green-metric/web-app/src/context/AppContext.js"],"names":["Axios","createContext","servAddr","defaultAppContext","loading","metrics","user","authenticated","username","password","AppContext","appReducer","state","action","type","value","map","el","oldData","data","Object","id","hasOwnProperty","currentOption","dispatchLoading","dispatchLogin","dispatchLogout","dispatchFormLogin","dispatchStartGetMetrics","dispatch","get","then","dispatchGetMetrics","dispatchSetMetric"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport { createContext } from \"react\";\nimport { servAddr } from \"../utils/constants\";\n\nexport const defaultAppContext = {\n  loading: false,\n  metrics: [],\n  user: {\n    authenticated: false,\n    username: null,\n    password: null\n  }\n};\n\nexport const AppContext = createContext(defaultAppContext);\n\nexport const appReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOADING\":\n      return { ...state, loading: action.value };\n    case \"GET_METRICS\":\n      return {\n        ...state,\n        metrics: action.value.map((el) => {\n          el.oldData = el.data instanceof Object ? { ...el.data } : el.data;\n          return el;\n        }),\n      };\n    case \"SET_METRIC\":\n      return {\n        ...state,\n        metrics: state.metrics.map((el) => {\n          if (el.id === action.id) {\n            if (el?.data.hasOwnProperty(\"options\"))\n              el.data.currentOption = action.value;\n            else el.data = action.value;\n          }\n          return el;\n        }),\n      };\n    case \"LOGOUT\":\n      return {\n        ...state,\n        user: {\n          authenticated: false,\n          username: null,\n          password: null\n        },\n      };\n    case \"LOGIN\":\n      return {\n        ...state,\n        user: {\n          authenticated: true,\n          username: action.username,\n          password: action.password\n        },\n      };\n    case \"FORM_LOGIN\":\n      return {\n        ...state,\n        user: {\n          authenticated: true,\n          username: null,\n          password: null\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nexport const dispatchLoading = (loading) => ({\n  type: \"LOADING\",\n  value: loading,\n});\n\nexport const dispatchLogin = ({ username, password }) => ({\n  username,\n  password,\n  type: \"LOGIN\",\n});\n\nexport const dispatchLogout = (user) => ({\n  type: \"LOGOUT\",\n});\n\nexport const dispatchFormLogin = () => ({\n  type: \"FORM_LOGIN\",\n});\n\nexport const dispatchStartGetMetrics = (dispatch) => {\n  Axios.get(`${servAddr}/metrics`).then(({ data }) => {\n    dispatch(dispatchGetMetrics(data));\n  });\n};\n\nconst dispatchGetMetrics = (metrics) => ({\n  type: \"GET_METRICS\",\n  value: metrics,\n});\n\nexport const dispatchSetMetric = (id, value) => ({\n  type: \"SET_METRIC\",\n  id,\n  value,\n});\n"]},"metadata":{},"sourceType":"module"}