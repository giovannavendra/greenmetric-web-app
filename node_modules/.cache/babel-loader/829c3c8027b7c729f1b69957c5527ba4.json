{"ast":null,"code":"import { createContext } from \"react\";\nimport { getMetrics } from \"../utils/data\";\nexport const defaultAppContext = {\n  loading: false,\n  metrics: [],\n  user: {\n    authenticated: window.localStorage.getItem('token', false),\n    username: window.localStorage.getItem('username', false)\n  }\n};\nexport const AppContext = /*#__PURE__*/createContext(defaultAppContext);\nexport const appReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOADING\":\n      return { ...state,\n        loading: action.value\n      };\n\n    case \"GET_METRICS\":\n      return { ...state,\n        metrics: action.value.map(el => {\n          el.oldData = el.data instanceof Object ? { ...el.data\n          } : el.data;\n          return el;\n        })\n      };\n\n    case \"SET_METRIC\":\n      return { ...state,\n        metrics: state.metrics.map(el => {\n          if (el.id === action.id) {\n            if (el === null || el === void 0 ? void 0 : el.data.hasOwnProperty(\"options\")) el.data.currentOption = action.value;else el.data = action.value;\n          }\n\n          return el;\n        })\n      };\n\n    case 'ADD_EVIDENCE':\n      return { ...state,\n        metrics: state.metrics.map(metric => {\n          if (metric.id === action.id) {\n            if (!metric.evidences.find(el => {\n              var _el$data;\n\n              return (el === null || el === void 0 ? void 0 : (_el$data = el.data) === null || _el$data === void 0 ? void 0 : _el$data.name) === action.file.name;\n            })) metric.evidences = [...metric.evidences, {\n              id: action.file.name,\n              data: action.file,\n              action: 'UPLOAD'\n            }];\n          }\n\n          return metric;\n        })\n      };\n\n    case 'REMOVE_EVIDENCE':\n      return { ...state,\n        metrics: state.metrics.map(metric => {\n          if (metric.id === action.id) {\n            metric.evidences = metric.evidences.map(evidence => {\n              if (evidence.id === action.evidenceId) {\n                return { ...evidence,\n                  data: null,\n                  action: 'DELETE'\n                };\n              }\n\n              return evidence;\n            });\n          }\n\n          return metric;\n        })\n      };\n\n    case \"LOGOUT\":\n      window.localStorage.removeItem('token');\n      window.localStorage.removeItem('username');\n      return { ...state,\n        user: {\n          authenticated: false,\n          username: null,\n          token: null\n        }\n      };\n\n    case \"LOGIN\":\n      window.localStorage.setItem('token', action.token);\n      window.localStorage.setItem('username', action.username);\n      return { ...state,\n        user: {\n          authenticated: true,\n          username: action.username,\n          token: action.token\n        }\n      };\n\n    case \"FORM_LOGIN\":\n      window.localStorage.removeItem('token');\n      window.localStorage.removeItem('username');\n      return { ...state,\n        user: {\n          authenticated: true,\n          username: null,\n          token: null\n        }\n      };\n\n    default:\n      return state;\n  }\n};\nexport const dispatchLoading = loading => ({\n  type: \"LOADING\",\n  value: loading\n});\nexport const dispatchLogin = ({\n  username,\n  password,\n  token\n}) => ({\n  username,\n  password,\n  token,\n  type: \"LOGIN\"\n});\nexport const dispatchLogout = user => ({\n  type: \"LOGOUT\"\n});\nexport const dispatchFormLogin = () => ({\n  type: \"FORM_LOGIN\"\n});\nexport const dispatchStartGetMetrics = dispatch => {\n  getMetrics().then(({\n    data\n  }) => {\n    dispatch(dispatchGetMetrics(data));\n  });\n};\nexport const dispatchGetMetrics = metrics => ({\n  type: \"GET_METRICS\",\n  value: metrics\n});\nexport const dispatchSetMetric = (id, value) => ({\n  type: \"SET_METRIC\",\n  id,\n  value\n});\nexport const dispatchAddEvidence = (metricId, file) => ({\n  type: 'ADD_EVIDENCE',\n  id: metricId,\n  file\n});\nexport const dispatchRemoveEvidence = (metricId, evidenceId) => ({\n  type: 'REMOVE_EVIDENCE',\n  id: metricId,\n  evidenceId\n});","map":{"version":3,"sources":["/Users/giovanna/Documents/MC855/green-metric/web-app/src/context/AppContext.js"],"names":["createContext","getMetrics","defaultAppContext","loading","metrics","user","authenticated","window","localStorage","getItem","username","AppContext","appReducer","state","action","type","value","map","el","oldData","data","Object","id","hasOwnProperty","currentOption","metric","evidences","find","name","file","evidence","evidenceId","removeItem","token","setItem","dispatchLoading","dispatchLogin","password","dispatchLogout","dispatchFormLogin","dispatchStartGetMetrics","dispatch","then","dispatchGetMetrics","dispatchSetMetric","dispatchAddEvidence","metricId","dispatchRemoveEvidence"],"mappings":"AAAA,SAASA,aAAT,QAA8B,OAA9B;AACA,SAASC,UAAT,QAA2B,eAA3B;AAEA,OAAO,MAAMC,iBAAiB,GAAG;AAC7BC,EAAAA,OAAO,EAAE,KADoB;AAE7BC,EAAAA,OAAO,EAAE,EAFoB;AAG7BC,EAAAA,IAAI,EAAE;AACFC,IAAAA,aAAa,EAAEC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,EAAqC,KAArC,CADb;AAEFC,IAAAA,QAAQ,EAAEH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,UAA5B,EAAwC,KAAxC;AAFR;AAHuB,CAA1B;AASP,OAAO,MAAME,UAAU,gBAAGX,aAAa,CAACE,iBAAD,CAAhC;AAEP,OAAO,MAAMU,UAAU,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACzC,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,SAAL;AACI,aAAO,EAAE,GAAGF,KAAL;AAAYV,QAAAA,OAAO,EAAEW,MAAM,CAACE;AAA5B,OAAP;;AACJ,SAAK,aAAL;AACI,aAAO,EACH,GAAGH,KADA;AAEHT,QAAAA,OAAO,EAAEU,MAAM,CAACE,KAAP,CAAaC,GAAb,CAAkBC,EAAD,IAAQ;AAC9BA,UAAAA,EAAE,CAACC,OAAH,GAAaD,EAAE,CAACE,IAAH,YAAmBC,MAAnB,GAA4B,EAAE,GAAGH,EAAE,CAACE;AAAR,WAA5B,GAA6CF,EAAE,CAACE,IAA7D;AACA,iBAAOF,EAAP;AACH,SAHQ;AAFN,OAAP;;AAOJ,SAAK,YAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHT,QAAAA,OAAO,EAAES,KAAK,CAACT,OAAN,CAAca,GAAd,CAAmBC,EAAD,IAAQ;AAC/B,cAAIA,EAAE,CAACI,EAAH,KAAUR,MAAM,CAACQ,EAArB,EAAyB;AACrB,gBAAIJ,EAAJ,aAAIA,EAAJ,uBAAIA,EAAE,CAAEE,IAAJ,CAASG,cAAT,CAAwB,SAAxB,CAAJ,EACIL,EAAE,CAACE,IAAH,CAAQI,aAAR,GAAwBV,MAAM,CAACE,KAA/B,CADJ,KAEKE,EAAE,CAACE,IAAH,GAAUN,MAAM,CAACE,KAAjB;AACR;;AACD,iBAAOE,EAAP;AACH,SAPQ;AAFN,OAAP;;AAWJ,SAAK,cAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHT,QAAAA,OAAO,EAAES,KAAK,CAACT,OAAN,CAAca,GAAd,CAAmBQ,MAAD,IAAY;AACnC,cAAIA,MAAM,CAACH,EAAP,KAAcR,MAAM,CAACQ,EAAzB,EAA6B;AACzB,gBAAI,CAACG,MAAM,CAACC,SAAP,CAAiBC,IAAjB,CAAsBT,EAAE;AAAA;;AAAA,qBAAI,CAAAA,EAAE,SAAF,IAAAA,EAAE,WAAF,wBAAAA,EAAE,CAAEE,IAAJ,sDAAUQ,IAAV,MAAmBd,MAAM,CAACe,IAAP,CAAYD,IAAnC;AAAA,aAAxB,CAAL,EACIH,MAAM,CAACC,SAAP,GAAmB,CAAC,GAAGD,MAAM,CAACC,SAAX,EAAsB;AAAEJ,cAAAA,EAAE,EAAER,MAAM,CAACe,IAAP,CAAYD,IAAlB;AAAwBR,cAAAA,IAAI,EAAEN,MAAM,CAACe,IAArC;AAA2Cf,cAAAA,MAAM,EAAE;AAAnD,aAAtB,CAAnB;AACP;;AACD,iBAAOW,MAAP;AACH,SANQ;AAFN,OAAP;;AAUJ,SAAK,iBAAL;AACI,aAAO,EACH,GAAGZ,KADA;AAEHT,QAAAA,OAAO,EAAES,KAAK,CAACT,OAAN,CAAca,GAAd,CAAmBQ,MAAD,IAAY;AACnC,cAAIA,MAAM,CAACH,EAAP,KAAcR,MAAM,CAACQ,EAAzB,EAA6B;AACzBG,YAAAA,MAAM,CAACC,SAAP,GAAmBD,MAAM,CAACC,SAAP,CAAiBT,GAAjB,CAAsBa,QAAD,IAAc;AAClD,kBAAIA,QAAQ,CAACR,EAAT,KAAgBR,MAAM,CAACiB,UAA3B,EAAuC;AACnC,uBAAO,EAAE,GAAGD,QAAL;AAAeV,kBAAAA,IAAI,EAAE,IAArB;AAA2BN,kBAAAA,MAAM,EAAE;AAAnC,iBAAP;AACH;;AACD,qBAAOgB,QAAP;AACH,aALkB,CAAnB;AAMH;;AACD,iBAAOL,MAAP;AACH,SAVQ;AAFN,OAAP;;AAcJ,SAAK,QAAL;AACIlB,MAAAA,MAAM,CAACC,YAAP,CAAoBwB,UAApB,CAA+B,OAA/B;AACAzB,MAAAA,MAAM,CAACC,YAAP,CAAoBwB,UAApB,CAA+B,UAA/B;AACA,aAAO,EACH,GAAGnB,KADA;AAEHR,QAAAA,IAAI,EAAE;AACFC,UAAAA,aAAa,EAAE,KADb;AAEFI,UAAAA,QAAQ,EAAE,IAFR;AAGFuB,UAAAA,KAAK,EAAE;AAHL;AAFH,OAAP;;AAQJ,SAAK,OAAL;AACI1B,MAAAA,MAAM,CAACC,YAAP,CAAoB0B,OAApB,CAA4B,OAA5B,EAAqCpB,MAAM,CAACmB,KAA5C;AACA1B,MAAAA,MAAM,CAACC,YAAP,CAAoB0B,OAApB,CAA4B,UAA5B,EAAwCpB,MAAM,CAACJ,QAA/C;AACA,aAAO,EACH,GAAGG,KADA;AAEHR,QAAAA,IAAI,EAAE;AACFC,UAAAA,aAAa,EAAE,IADb;AAEFI,UAAAA,QAAQ,EAAEI,MAAM,CAACJ,QAFf;AAGFuB,UAAAA,KAAK,EAAEnB,MAAM,CAACmB;AAHZ;AAFH,OAAP;;AAQJ,SAAK,YAAL;AACI1B,MAAAA,MAAM,CAACC,YAAP,CAAoBwB,UAApB,CAA+B,OAA/B;AACAzB,MAAAA,MAAM,CAACC,YAAP,CAAoBwB,UAApB,CAA+B,UAA/B;AACA,aAAO,EACH,GAAGnB,KADA;AAEHR,QAAAA,IAAI,EAAE;AACFC,UAAAA,aAAa,EAAE,IADb;AAEFI,UAAAA,QAAQ,EAAE,IAFR;AAGFuB,UAAAA,KAAK,EAAE;AAHL;AAFH,OAAP;;AAQJ;AACI,aAAOpB,KAAP;AAnFR;AAqFH,CAtFM;AAwFP,OAAO,MAAMsB,eAAe,GAAIhC,OAAD,KAAc;AACzCY,EAAAA,IAAI,EAAE,SADmC;AAEzCC,EAAAA,KAAK,EAAEb;AAFkC,CAAd,CAAxB;AAKP,OAAO,MAAMiC,aAAa,GAAG,CAAC;AAAE1B,EAAAA,QAAF;AAAY2B,EAAAA,QAAZ;AAAsBJ,EAAAA;AAAtB,CAAD,MAAoC;AAC7DvB,EAAAA,QAD6D;AAE7D2B,EAAAA,QAF6D;AAG7DJ,EAAAA,KAH6D;AAI7DlB,EAAAA,IAAI,EAAE;AAJuD,CAApC,CAAtB;AAOP,OAAO,MAAMuB,cAAc,GAAIjC,IAAD,KAAW;AACrCU,EAAAA,IAAI,EAAE;AAD+B,CAAX,CAAvB;AAIP,OAAO,MAAMwB,iBAAiB,GAAG,OAAO;AACpCxB,EAAAA,IAAI,EAAE;AAD8B,CAAP,CAA1B;AAIP,OAAO,MAAMyB,uBAAuB,GAAIC,QAAD,IAAc;AACjDxC,EAAAA,UAAU,GAAGyC,IAAb,CAAkB,CAAC;AAAEtB,IAAAA;AAAF,GAAD,KAAc;AAC5BqB,IAAAA,QAAQ,CAACE,kBAAkB,CAACvB,IAAD,CAAnB,CAAR;AACH,GAFD;AAGH,CAJM;AAMP,OAAO,MAAMuB,kBAAkB,GAAIvC,OAAD,KAAc;AAC5CW,EAAAA,IAAI,EAAE,aADsC;AAE5CC,EAAAA,KAAK,EAAEZ;AAFqC,CAAd,CAA3B;AAKP,OAAO,MAAMwC,iBAAiB,GAAG,CAACtB,EAAD,EAAKN,KAAL,MAAgB;AAC7CD,EAAAA,IAAI,EAAE,YADuC;AAE7CO,EAAAA,EAF6C;AAG7CN,EAAAA;AAH6C,CAAhB,CAA1B;AAOP,OAAO,MAAM6B,mBAAmB,GAAG,CAACC,QAAD,EAAWjB,IAAX,MAAqB;AACpDd,EAAAA,IAAI,EAAE,cAD8C;AAEpDO,EAAAA,EAAE,EAAEwB,QAFgD;AAGpDjB,EAAAA;AAHoD,CAArB,CAA5B;AAMP,OAAO,MAAMkB,sBAAsB,GAAG,CAACD,QAAD,EAAWf,UAAX,MAA2B;AAC7DhB,EAAAA,IAAI,EAAE,iBADuD;AAE7DO,EAAAA,EAAE,EAAEwB,QAFyD;AAG7Df,EAAAA;AAH6D,CAA3B,CAA/B","sourcesContent":["import { createContext } from \"react\";\nimport { getMetrics } from \"../utils/data\";\n\nexport const defaultAppContext = {\n    loading: false,\n    metrics: [],\n    user: {\n        authenticated: window.localStorage.getItem('token', false),\n        username: window.localStorage.getItem('username', false),\n    }\n};\n\nexport const AppContext = createContext(defaultAppContext);\n\nexport const appReducer = (state, action) => {\n    switch (action.type) {\n        case \"LOADING\":\n            return { ...state, loading: action.value };\n        case \"GET_METRICS\":\n            return {\n                ...state,\n                metrics: action.value.map((el) => {\n                    el.oldData = el.data instanceof Object ? { ...el.data } : el.data;\n                    return el;\n                }),\n            };\n        case \"SET_METRIC\":\n            return {\n                ...state,\n                metrics: state.metrics.map((el) => {\n                    if (el.id === action.id) {\n                        if (el?.data.hasOwnProperty(\"options\"))\n                            el.data.currentOption = action.value;\n                        else el.data = action.value;\n                    }\n                    return el;\n                }),\n            };\n        case 'ADD_EVIDENCE':\n            return {\n                ...state,\n                metrics: state.metrics.map((metric) => {\n                    if (metric.id === action.id) {\n                        if (!metric.evidences.find(el => el?.data?.name === action.file.name))\n                            metric.evidences = [...metric.evidences, { id: action.file.name, data: action.file, action: 'UPLOAD' }]\n                    }\n                    return metric;\n                }),\n            }\n        case 'REMOVE_EVIDENCE':\n            return {\n                ...state,\n                metrics: state.metrics.map((metric) => {\n                    if (metric.id === action.id) {\n                        metric.evidences = metric.evidences.map((evidence) => {\n                            if (evidence.id === action.evidenceId) {\n                                return { ...evidence, data: null, action: 'DELETE' }\n                            }\n                            return evidence\n                        })\n                    }\n                    return metric;\n                }),\n            }\n        case \"LOGOUT\":\n            window.localStorage.removeItem('token')\n            window.localStorage.removeItem('username')\n            return {\n                ...state,\n                user: {\n                    authenticated: false,\n                    username: null,\n                    token: null\n                },\n            };\n        case \"LOGIN\":\n            window.localStorage.setItem('token', action.token)\n            window.localStorage.setItem('username', action.username)\n            return {\n                ...state,\n                user: {\n                    authenticated: true,\n                    username: action.username,\n                    token: action.token\n                },\n            };\n        case \"FORM_LOGIN\":\n            window.localStorage.removeItem('token')\n            window.localStorage.removeItem('username')\n            return {\n                ...state,\n                user: {\n                    authenticated: true,\n                    username: null,\n                    token: null\n                },\n            };\n        default:\n            return state;\n    }\n};\n\nexport const dispatchLoading = (loading) => ({\n    type: \"LOADING\",\n    value: loading,\n});\n\nexport const dispatchLogin = ({ username, password, token }) => ({\n    username,\n    password,\n    token,\n    type: \"LOGIN\",\n});\n\nexport const dispatchLogout = (user) => ({\n    type: \"LOGOUT\",\n});\n\nexport const dispatchFormLogin = () => ({\n    type: \"FORM_LOGIN\",\n});\n\nexport const dispatchStartGetMetrics = (dispatch) => {\n    getMetrics().then(({ data }) => {\n        dispatch(dispatchGetMetrics(data));\n    });\n};\n\nexport const dispatchGetMetrics = (metrics) => ({\n    type: \"GET_METRICS\",\n    value: metrics,\n});\n\nexport const dispatchSetMetric = (id, value) => ({\n    type: \"SET_METRIC\",\n    id,\n    value,\n});\n\n\nexport const dispatchAddEvidence = (metricId, file) => ({\n    type: 'ADD_EVIDENCE',\n    id: metricId,\n    file\n})\n\nexport const dispatchRemoveEvidence = (metricId, evidenceId) => ({\n    type: 'REMOVE_EVIDENCE',\n    id: metricId,\n    evidenceId\n})"]},"metadata":{},"sourceType":"module"}